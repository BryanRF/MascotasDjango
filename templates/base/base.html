{% load static %}

<!DOCTYPE html>
<html>
  <head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <link
      rel="shortcut icon"
      href="{% static 'images/favicon.png' %}"
      type=""
    />

    <title>Adopcion Responsable</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <!-- bootstrap core css -->

    <!--owl slider stylesheet -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <!-- nice select  -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css"
      integrity="sha512-CruCP+TD3yXzlvvijET8wV5WxxEh5H8P4cmz0RFbKK6FlZ2sYl3AEsKlLPHbniXKSrDdFewhbmBK5skbdsASbQ=="
      crossorigin="anonymous"
    />
    <!-- font awesome style -->

    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/bootstrap.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/font-awesome.min.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/bootstrap.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/style.css' %}"
    />
  </head>

  <body>
    <div class="hero_area">
      <div class="bg-box">
        <img
          src="{% static 'images/pexels-nothing-ahead-16278274.jpg' %}"
          alt=""
        />
      </div>
      <!-- header section strats -->
      <header class="header_section ">
        <div class="container">
          <nav class="navbar navbar-expand-lg custom_nav-container">
            <a class="navbar-brand" href="index.html">
              <span> Adopcion Responsable🐾 </span>
            </a>

            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class=""> </span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mx-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="index.html"
                    >INICIO <span class="sr-only">(current)</span></a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="menu.html">MASCOTAS</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="about.html">NOSOTROS</a>
                </li>
              </ul>
           
          
              <div class="btn-group" role="group" aria-label="Basic example">
                {% if user.is_authenticated %}
                    <a href="{% url 'logout_view' %}" class="btn btn-warning order_online">Cerrar Sesión</a>
                {% else %}
                    <a href="#" id="registerButton" class="btn btn-warning order_online">Registrate</a>
                    <a href="#" id="loginButton" class="btn btn-warning order_online">Ingresar</a>
                {% endif %}
            </div>
            
            </div>
          </nav>
        </div>
      </header>

      {% block content %}
      <h4> Bloque de contenido </h4>
      {% endblock %} 
    
    <!-- footer section -->
    <footer class="footer_section">
      <div class="container">
        <div class="row">
          <div class="col-md-4 footer-col">
            <div class="footer_contact">
              <h4>Contactanos</h4>
              <div class="contact_link_box">
                <a href="">
                  <i class="fa fa-map-marker" aria-hidden="true"></i>
                  <span> Ubicacion </span>
                </a>
                <a href="">
                  <i class="fa fa-phone" aria-hidden="true"></i>
                  <span> Call +01 1234567890 </span>
                </a>
                <a href="">
                  <i class="fa fa-envelope" aria-hidden="true"></i>
                  <span> demo@gmail.com </span>
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-4 footer-col">
            <div class="footer_detail">
              <a href="" class="footer-logo"> Adopcion Responsable </a>
              <p>
                Necessary, making this the first true generator on the Internet.
                It uses a dictionary of over 200 Latin words, combined with
              </p>
              <div class="footer_social">
                <a href="">
                  <i class="fa fa-facebook" aria-hidden="true"></i>
                </a>
                <a href="">
                  <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
                <a href="">
                  <i class="fa fa-linkedin" aria-hidden="true"></i>
                </a>
                <a href="">
                  <i class="fa fa-instagram" aria-hidden="true"></i>
                </a>
                <a href="">
                  <i class="fa fa-pinterest" aria-hidden="true"></i>
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-4 footer-col">
            <h4>Hora de atencion</h4>
            <p>Todos los dias</p>
            <p>10.00 Am -10.00 Pm</p>
          </div>
        </div>
        <div class="footer-info">
          <p>
            &copy; <span id="displayYear"></span>
            <a href="https://html.design/"></a><br /><br />
            <span id="displayYear"></span>
            <a href="https://themewagon.com/" target="_blank"></a>
          </p>
        </div>
      </div>
    </footer>
    <!-- footer section -->

    <!-- jQery -->
    <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
    <!-- popper js -->
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <!-- bootstrap js -->

    <script src="{% static 'js/bootstrap.js' %}"></script>
    <!-- owl slider -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- isotope js -->
    <script src="https://unpkg.com/isotope-layout@3.0.4/dist/isotope.pkgd.min.js"></script>
    <!-- nice select -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
    <!-- custom js -->
    <script src="{% static 'js/custom.js' %}"></script>
    <!-- Google Map -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap"></script>
    <!-- End Google Map -->
    <script>
      document.querySelectorAll('.copy-code-button').forEach(button => {
          button.addEventListener('click', () => {
              const code = button.dataset.code;
              const tempInput = document.createElement('input');
              tempInput.value = code;
              document.body.appendChild(tempInput);
              tempInput.select();
              document.execCommand('copy');
              document.body.removeChild(tempInput);
  
              Swal.fire({
                  icon: 'success',
                  title: '¡Código copiado!',
                  text: 'El código se ha copiado al portapapeles correctamente.',
                  showConfirmButton: false,
                  timer: 1500
              });
          });
      });
  </script>
    <script>
      function likeMascota(mascotaId) {
        fetch(`api/like_mascota/${mascotaId}/`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({ mascota_id: mascotaId })
        })
        .then(response => response.json())
        .then(data => {
            if (data.message) {
                // Actualizar la interfaz de usuario si es necesario
                document.getElementById(`like-${mascotaId}`).textContent = data.likes;
                // Mostrar la notificación de éxito
                Swal.fire({
                  icon: 'error',
                  title: 'Like Agregado',
                  text: '¡Has dado like a esta mascota!, dale los me gusta que quieras :D',
                  showConfirmButton: false,
                  timer: 3000,
                  iconHtml: '<i class="bi bi-suit-heart-fill"></i>' // Reemplaza con el código de tu corazón
              });
              
            }
        })
        .catch(error => console.error('Error:', error));
    }
    
    
    
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
            }
          }
        }
        return cookieValue;
      }
      
      
    </script>
    

    <!-- y así sucesivamente para otros campos -->

    <script>
      document.getElementById('registerButton').addEventListener('click', function() {
        Swal.fire({
          title: 'Registro de Usuario ',
          html:
          '<input id="swal-input1" class="swal2-input"  placeholder="Usuario" required>' +
          '<input id="swal-input2" class="swal2-input"  placeholder="Contraseña" type="password" required>' +
          '<input id="swal-input3" class="swal2-input"  placeholder="Nombre Completo" required>' +
          '<input id="swal-input4" class="swal2-input"  placeholder="Teléfono" required>' +
          '<input id="swal-input5" class="swal2-input" placeholder="DNI" required>' +
          '<input id="swal-input6" class="swal2-input" placeholder="Email" required>' +
          '<input id="swal-input7" class="swal2-input"  type="date" required>' +
          '<select id="swal-input8" class="swal2-input" required>' +
            '<option value="masculino" >Masculino</option>' +
            '<option value="femenino">Femenino</option>' +
            '<option value="otro">Otro</option>' +
          '</select>',
          showCancelButton: true,
          clickOutsideToClose: false, // Evita que se cierre al hacer clic fuera
          confirmButtonText: 'Registrar',
          preConfirm: () => {
            const username = Swal.getPopup().querySelector('#swal-input1').value;
            const password = Swal.getPopup().querySelector('#swal-input2').value;
            const nombre = Swal.getPopup().querySelector('#swal-input3').value;
            const telefono = Swal.getPopup().querySelector('#swal-input4').value;
            const dni = Swal.getPopup().querySelector('#swal-input5').value;
            const email = Swal.getPopup().querySelector('#swal-input6').value;
            const fechaNacimiento = Swal.getPopup().querySelector('#swal-input7').value;
            const genero = Swal.getPopup().querySelector('#swal-input8').value;
        
            // Construye los datos que enviarás al servidor
            const data = {
                username: username,
                password: password,
                nombre: nombre,
                telefono: telefono,
                dni: dni,
                email: email,
                fechaNacimiento: fechaNacimiento,
                genero: genero
            };
            console.log(data)
            // Realiza la solicitud fetch
            fetch('api/registro_usuario/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': getCookie('csrftoken')
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
              if (data.success) {
                  Swal.fire({
                      icon: 'success',
                      title: 'Registro exitoso',
                      text: '¡Tu registro ha sido exitoso!',
                      showConfirmButton: false,
                      timer: 2000
                  });
                  // Aquí puedes hacer lo que necesites después de registrar los datos
              } else {
                  Swal.fire({
                      icon: 'error',
                      title: 'Error',
                      text: 'Ocurrió un error durante el registro',
                  });
              }
          })
          
            .catch(error => console.error('Error:', error));
        }
        
        })
      });
      document.getElementById('loginButton').addEventListener('click', function() {
        Swal.fire({
            title: 'Inicio de Sesión',
            html:
            '<input id="swal-username" class="swal2-input" placeholder="Usuario o Correo Electrónico">' +
            '<input id="swal-password" class="swal2-input" placeholder="Contraseña" type="password">',
            showCancelButton: true,
            confirmButtonText: 'Iniciar Sesión',
            preConfirm: () => {
                const username_or_email = Swal.getPopup().querySelector('#swal-username').value;
                const password = Swal.getPopup().querySelector('#swal-password').value;
    
                const data = {
                    username_or_email: username_or_email,
                    password: password
                };
    
                fetch('api/login/', {
                    method: 'POST',
                    headers: {
                      'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Inicio de Sesión Exitoso',
                            text: '¡Bienvenido!',
                            showConfirmButton: false,
                            timer: 2000
                        });
                        location.reload();
                        // Aquí puedes redirigir al usuario o hacer lo que necesites después del inicio de sesión
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: data.error,
                        });
                    }
                })
                .catch(error => console.error('Error:', error));
            }
        });
    });
    
      </script>
      
      
  </body>
</html>
